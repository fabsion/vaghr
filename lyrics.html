<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>We're Gonna Be Okay - Lirik</title>
    <!-- Mengimpor font 'Press Start 2P' dari Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        /* Gaya dasar untuk halaman lirik */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: 'Press Start 2P', cursive, monospace;
            background-color: #F0F2BD; /* Latar belakang body: Krem Sangat Pucat */
            color: #4B352A; /* Warna teks default untuk body */
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto; /* Memungkinkan scroll jika lirik panjang */
        }

        .lyrics-title {
            font-size: 2.5em; /* Tetap em, akan skala relatif ke body */
            margin-bottom: 10px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            color: #4B352A; /* Judul Lagu: Cokelat Tua */
        }

        .lyrics-artist {
            font-size: 1.5em; /* Tetap em */
            margin-bottom: 30px;
            text-align: center;
            color: #CA7842; /* Nama Artis: Oranye Kecokelatan */
        }

        /* --- Gaya untuk Pemutar Audio Kustom --- */
        .custom-audio-player {
            width: 90%; /* Lebih responsif */
            max-width: 600px;
            background-color: #ECDFCC; /* Warna background player: Krem Hangat */
            border-radius: 25px;
            padding: 15px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .play-pause-btn {
            background: none;
            border: none;
            font-size: 2em;
            cursor: pointer;
            color: #4B352A;
            padding: 0;
            line-height: 1;
            transition: transform 0.2s ease;
        }

        .play-pause-btn:hover {
            transform: scale(1.1);
        }

        .progress-container {
            flex-grow: 1;
            height: 8px;
            background-color: rgba(75, 53, 42, 0.2);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #B2CD9C;
            border-radius: 4px;
        }

        .progress-dot {
            position: absolute;
            top: 50%;
            left: 0%;
            transform: translate(-50%, -50%);
            width: 30px;
            height: 30px;
            pointer-events: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .progress-dot svg {
            width: 100%;
            height: 100%;
            fill: #FFFFFF;
            filter: drop-shadow(0 0 3px rgba(0,0,0,0.2));
        }

        .time-display {
            font-size: 0.9em;
            color: #4B352A;
            white-space: nowrap;
        }
        /* --- Akhir Gaya Pemutar Audio Kustom --- */

        /* --- Gaya untuk Lirik Karaoke yang Diadaptasi --- */
        .lyrics-display {
            position: relative;
            width: 90%; /* Lebih responsif */
            max-width: 600px;
            height: auto; /* PENTING: Ubah menjadi auto */
            max-height: 40vh; /* PENTING: Tinggi maksimum responsif (misal: 40% dari tinggi viewport) */
            margin-bottom: 30px;
            background-color: rgba(255, 255, 255, 0.5);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Tetap hidden untuk efek scroll transform */
        }

        .lyrics-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            transition: transform 0.5s ease-out;
            padding: 20px 0;
            box-sizing: border-box;
        }

        .lyric-line {
            font-family: 'Press Start 2P', monospace;
            font-size: 1em; /* Tetap em */
            line-height: 1.8;
            text-align: center;
            margin: 10px 0;
            font-weight: normal;
            transition: all 0.3s ease;

            -webkit-text-fill-color: rgba(75, 53, 42, 0.5);
            -webkit-text-stroke-width: 1px;
            -webkit-text-stroke-color: rgba(75, 53, 42, 0.7);
            color: rgba(75, 53, 42, 0.5);
            opacity: 1;
        }

        .lyric-line.highlighted {
            opacity: 1;
            color: #CA7842;
            transform: scale(1.05);
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);

            -webkit-text-fill-color: #CA7842;
            -webkit-text-stroke-color: #CA7842;
        }
        /* --- Akhir Gaya Lirik Karaoke yang Diadaptasi --- */

        .back-button {
            padding: 15px 30px;
            background-color: #4B352A;
            color: #FFFFFF;
            border: none;
            border-radius: 10px;
            font-family: 'Press Start 2P', cursive, monospace;
            font-size: 1.1em;
            cursor: pointer;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .back-button:hover {
            background-color: #B2CD9C;
            transform: translateY(-3px);
            box-shadow: 0 7px 12px rgba(0, 0, 0, 0.3);
        }

        .back-button:active {
            transform: translateY(0px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <h2 class="lyrics-title">We're Gonna Be Okay</h2>
    <h3 class="lyrics-artist">by Cody Francis</h3>

    <!-- Pemutar Audio Kustom -->
    <div class="custom-audio-player">
        <button class="play-pause-btn" id="playPauseBtn">▶</button>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-dot" id="progressDot">
                <!-- SVG Icon Awan Kecil -->
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18.0001 10.0001C19.6569 10.0001 21.0001 11.3432 21.0001 13.0001C21.0001 14.6569 19.6569 16.0001 18.0001 16.0001H7.00006C4.79093 16.0001 3.00006 14.2092 3.00006 12.0001C3.00006 9.79097 4.79093 8.0001 7.00006 8.0001C7.00006 5.79097 8.79093 4.0001 11.0001 4.0001C12.9239 4.0001 14.5492 5.3813 14.9082 7.2001C15.6569 7.2001 16.5001 7.4001 17.0001 8.0001C17.5001 8.6001 18.0001 9.3001 18.0001 10.0001Z" />
                </svg>
            </div>
        </div>
        <div class="time-display" id="timeDisplay">0:00 / 0:00</div>
        <!-- Elemen audio tersembunyi, dikontrol oleh JS -->
        <audio id="songAudio" src="images/CodyFrancisWereGonnaBeOkay.mp3"></audio>
    </div>

    <!-- Kontainer baru untuk lirik yang akan diisi oleh JavaScript -->
    <div class="lyrics-display" id="lyricsDisplay">
        <div class="lyrics-content" id="lyricsContent">
            <!-- Lirik akan dimasukkan di sini oleh JavaScript -->
        </div>
    </div>

    <!-- Tombol kembali yang akan mengarahkan ke index.html -->
    <a href="index.html" class="back-button">Kembali</a>

    <script>
        const songAudio = document.getElementById('songAudio');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressDot = document.getElementById('progressDot');
        const timeDisplay = document.getElementById('timeDisplay');
        const lyricsDisplay = document.getElementById('lyricsDisplay');
        const lyricsContent = document.getElementById('lyricsContent');

        // Fungsi untuk format waktu (menit:detik)
        function formatTime(seconds) {
            if (isNaN(seconds) || seconds < 0) return "0:00";
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;
        }

        // Data lirik dengan timestamp (dalam detik)
        // PENTING: Sesuaikan waktu ini agar sesuai dengan lagu Anda!
        // Lirik dimulai pada detik ke-10.
        const lyricsData = [
            { time: 10.0, text: "Close your eyes" },
            { time: 12.5, text: "Get some rest" },
            { time: 15.0, text: "I'm by your side" },
            { time: 17.5, text: "Lay your head on my chest" },
            { time: 20.0, text: "I know you've had" },
            { time: 22.5, text: "A really bad day" },
            { time: 25.0, text: "But I'm right here" },
            { time: 27.5, text: "It's gonna be ok" },
            { time: 31.0, text: "The world could fall down" },
            { time: 34.0, text: "It's gonna be ok" },
            { time: 37.0, text: "The Sun could go out" },
            { time: 40.0, text: "We're gonna be ok" },
            { time: 43.0, text: "If all the blue skies fade to grey" },
            { time: 47.0, text: "We're gonna be ok" },
            { time: 51.0, text: "Calm your soul" },
            { time: 54.0, text: "Hold my hand" },
            { time: 57.0, text: "Don't let go" },
            { time: 60.0, text: "I understand" },
            { time: 63.0, text: "I know it hurts" },
            { time: 66.0, text: "It wasn't fair" },
            { time: 69.0, text: "It's over now" },
            { time: 72.0, text: "So don't despair" },
            { time: 76.0, text: "The world could fall down" },
            { time: 79.0, text: "It's gonna be ok" },
            { time: 82.0, text: "The Sun could go out" },
            { time: 85.0, text: "We're gonna be ok" },
            { time: 88.0, text: "If all the blue skies fade to grey" },
            { time: 92.0, text: "We're gonna be ok" },
            { time: 96.0, text: "The world could fall down" },
            { time: 99.0, text: "It's gonna be ok" },
            { time: 102.0, text: "The Sun could go out" },
            { time: 105.0, text: "We're gonna be ok" },
            { time: 108.0, text: "If all the blue skies fade to grey" },
            { time: 112.0, text: "We're gonna be ok" },
            { time: 116.0, text: "The world could fall down" },
            { time: 119.0, text: "It's gonna be ok" },
            { time: 122.0, text: "The Sun could go out" },
            { time: 125.0, text: "We're gonna be ok" },
            { time: 128.0, text: "If all the blue skies fade to grey" },
            { time: 132.0, text: "We're gonna be ok" }
        ];

        let currentHighlightedLyric = null;
        let currentLyricIndex = -1;

        function loadLyrics() {
            lyricsContent.innerHTML = '';
            lyricsData.forEach((lyric, index) => {
                const p = document.createElement('p');
                p.classList.add('lyric-line');
                p.textContent = lyric.text;
                p.dataset.time = lyric.time;
                p.id = `lyric-${index}`;
                lyricsContent.appendChild(p);
            });
        }

        playPauseBtn.addEventListener('click', () => {
            if (songAudio.paused) {
                songAudio.play();
                playPauseBtn.textContent = '❚❚';
            } else {
                songAudio.pause();
                playPauseBtn.textContent = '▶';
            }
        });

        songAudio.addEventListener('timeupdate', () => {
            const currentTime = songAudio.currentTime;
            const duration = songAudio.duration;

            if (!isNaN(duration) && duration > 0) {
                const progressPercent = (currentTime / duration) * 100;
                progressBar.style.width = `${progressPercent}%`;
                progressDot.style.left = `${progressPercent}%`;
                timeDisplay.textContent = `${formatTime(currentTime)} / ${formatTime(duration)}`;
            } else {
                timeDisplay.textContent = `${formatTime(currentTime)} / 0:00`;
            }

            let newLyricIndex = -1;
            for (let i = 0; i < lyricsData.length; i++) {
                if (currentTime >= lyricsData[i].time) {
                    newLyricIndex = i;
                } else {
                    break;
                }
            }

            if (newLyricIndex !== -1 && newLyricIndex !== currentLyricIndex) {
                if (currentHighlightedLyric) {
                    currentHighlightedLyric.classList.remove('highlighted');
                }

                const newHighlightedLyric = document.getElementById(`lyric-${newLyricIndex}`);
                if (newHighlightedLyric) {
                    newHighlightedLyric.classList.add('highlighted');
                    currentHighlightedLyric = newHighlightedLyric;
                    currentLyricIndex = newLyricIndex;

                    // Hitung posisi scroll untuk menengahkan lirik yang disorot
                    const lyricsDisplayHeight = lyricsDisplay.clientHeight;
                    const lyricLineHeight = newHighlightedLyric.offsetHeight;
                    const lyricOffsetTop = newHighlightedLyric.offsetTop;

                    // Kita ingin bagian tengah lirik berada di tengah lyricsDisplay
                    const translateYValue = (lyricsDisplayHeight / 2) - (lyricLineHeight / 2) - lyricOffsetTop;

                    lyricsContent.style.transform = `translateY(${translateYValue}px)`;
                }
            } else if (newLyricIndex === -1 && currentHighlightedLyric) {
                currentHighlightedLyric.classList.remove('highlighted');
                currentHighlightedLyric = null;
                currentLyricIndex = -1;
            }
        });

        songAudio.addEventListener('ended', () => {
            playPauseBtn.textContent = '▶';
            progressBar.style.width = '0%';
            progressDot.style.left = '0%';
            songAudio.currentTime = 0;
            if (currentHighlightedLyric) {
                currentHighlightedLyric.classList.remove('highlighted');
                currentHighlightedLyric = null;
                currentLyricIndex = -1;
            }
            lyricsContent.style.transform = `translateY(0)`; // Kembali ke atas
        });

        songAudio.addEventListener('canplaythrough', () => {
            console.log("Audio is ready to play through!");
            if (!isNaN(songAudio.duration)) {
                timeDisplay.textContent = `0:00 / ${formatTime(songAudio.duration)}`;
                songAudio.play();
                playPauseBtn.textContent = '❚❚';
            }
        });

        songAudio.addEventListener('seeked', () => {
            songAudio.dispatchEvent(new Event('timeupdate'));
        });

        progressContainer.addEventListener('click', (e) => {
            const clickX = e.offsetX;
            const width = progressContainer.offsetWidth;
            const clickPercent = (clickX / width);
            songAudio.currentTime = clickPercent * songAudio.duration;
        });

        loadLyrics();
    </script>
</body>
</html>
